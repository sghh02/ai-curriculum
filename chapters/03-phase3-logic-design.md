# PHASE 3：処理順序と条件分岐を日本語で設計する

## この章の目的

ツール操作やコードを書く前に、処理ロジックを日本語で固定します。  
「何を、どの順番で、どの条件で実行するか」を確定させる章です。

## AIの役割

このフェーズでのAIは**デバッガー**です。  
抜け漏れ、例外系、責任者不明の分岐を指摘させます。

## 実施ステップ

1. 採用案の処理を時系列で並べる  
例: 録音 -> 文字起こし -> 要約 -> 通知
2. 各手順の入力と出力を定義する
3. If-Then条件を明文化する  
例: 「機密会議なら録音せず手動議事録へ分岐」
4. 例外時の復旧手順を決める  
例: 文字起こし失敗時は再試行3回後に担当者通知
5. 責任分担を明確化する（誰が確認し、誰が承認するか）
6. AIに「仕様レビュー」を依頼し、矛盾点を修正する

## 成果物更新

`design-spec.md` に以下を追加します。

- 処理フロー（番号付き手順）
- 入出力定義
- If-Then条件分岐
- 例外フロー
- 承認・通知ルール

## AIに聞く例

```text
次の処理フローの抜け漏れをレビューして。
特に「責任者不明」「例外未定義」「承認タイミング不足」を重点チェックして。
```

```text
この日本語設計を、実装前レビュー用チェックリストに変換して。
```

## 評価ルーブリック（3軸）

| 観点 | 1: 不十分 | 2: 最低限 | 3: 実務レベル | 4: 高水準 |
|---|---|---|---|---|
| 問いの回数と質 | 正常系しか聞かない | 例外を少し確認 | 例外と責任分担を確認 | 想定外ケースまで掘る |
| 言語化の粒度 | 手順が曖昧 | 手順のみ定義 | 条件分岐まで明確 | 入出力まで厳密 |
| 失敗からのリカバリー | 不整合を放置 | 修正点のみ記載 | 修正理由を説明できる | 再発防止の観点まで追加 |

## 失敗時のリカバリー手順

1. 失敗事象を「入力不足」「分岐漏れ」「責任不在」で分類する
2. フロー図を一段階上げて再定義する（抽象化）
3. 再定義後に具体化し、条件を再記述する
4. 変更差分を `design-change-log.md` に記録する

## 次章への接続

Phase 4では、意地悪な仕様変更を受けて設計を差し替える訓練を行います。

---

## 課題提出

この章には提出課題があります。

1. 上記の[練習問題/ハンズオン課題/制作物]を完了する
2. GitHub で `feature/[章ファイル名（拡張子なし）]` ブランチを作成し、`develop` へのPRを作成（base=`develop`）
3. [AI総合レビューツール](https://ai.studio/apps/drive/1AMqIqU4Bio4te7AWh5dly1Qzp7CesqP9?fullscreenApplet=true) でレビューを実行
4. 問題がなければ、スプレッドシートに **PR URL** と **完了日** を記入
